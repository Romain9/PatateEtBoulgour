<script type="text/javascript" src="javascript/index.js"></script>

<div data-page="{{#nbPage}}{{nbPage}}{{/nbPage}}" class="activities" id="activities" >
{{#activities}}

<div class="activity items" id="item">
    
    <a class="label" href="{{url}}" id="label">{{label}}</a>

    <p class="description">{{description}}</p>
    <div class="activityBtn">
    {{^unlogged}}
        {{#containsCurrentUser}}
            {{#inProfile}}
                {{>components/rating}}
            {{/inProfile}}
            <button class="activityAction removeActivity" onclick="handleActivityStatusChange({{id}}, this)">Retirer activité</button>
        {{/containsCurrentUser}}
        {{^containsCurrentUser}}
            <button class="activityAction addActivity" onclick="handleActivityStatusChange({{id}}, this)">Ajouter activité</button>
        {{/containsCurrentUser}}
    {{/unlogged}}
    </div>

    <div class="tag">
        {{#pathologies}}
            <p class="patho">{{label}}</p>
        {{/pathologies}}
        
        {{#disciplines}}
            <p class="disci">{{label}}</p>
        {{/disciplines}}
    </div>
</div>  

{{/activities}}
{{^activities}}
    <h3>Aucune activité</h3>
{{/activities}}
</div>

{{#inProfile}}
<script>
    $('.notes').each(function(){
        let id = $(this).attr('id').split('-')[1];
        findRatingFor(id);
    });
</script>
{{/inProfile}}